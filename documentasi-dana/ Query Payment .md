Query Payment
POST
/rest/v1.1/debit/status
This API is used to inquiry payment status and information from merchant's platform to DANA

API Type
SNAP API
Expected Timeout
8 second
SNAP Service Code
55

Show API Details
This API is used for the following solution:
DANA Widget Binding
Seamlessly integrate DANA payments into merchant's platform, allowing customers to link their DANA accounts for faster, smoother transactions across all merchant's services.
This API is used for the following solution:
DANA Widget Non Binding
Integrate DANA as a payment method in merchant's platform without account binding. Users simply select DANA, get redirected to the DANA App, and complete payments using their DANA account.

Request Headers
Content-Type
string
1 - 127 characters
Required
Content type, value always application/json
X-TIMESTAMP
string
25 characters
Required
Transaction date time, in format YYYY-MM-DDTHH:mm:ss+07:00. Time must be in GMT+7 (Jakarta time)
X-SIGNATURE
string
Required
Signature need to be generated with asymmetricSignature method
ORIGIN
string
Origin domain
X-PARTNER-ID
string
1 - 36 characters
Required
Unique identifier for partner was generated by DANA, or known as clientId
X-EXTERNAL-ID
string
1 - 36 characters
Required
Unique messaging reference identifier generated by merchant and should be unique within the same day
CHANNEL-ID
string
1 - 5 characters
Required
Device identification on which the API services is currently being accessed by the end user (customer)

Request Body
originalPartnerReferenceNo
string
1 - 64 characters
Conditional
Original transaction identifier on partner system
Conditional Info
Y:= originalReferenceNo is blank
originalReferenceNo
string
1 - 64 characters
Conditional
Original transaction identifier on DANA system
Conditional Info
Y:= originalPartnerReferenceNo is blank
originalExternalId
string
1 - 36 characters
Original external identifier on header message
serviceCode
string
2 characters
Required
Transaction type indicator is based on the service code of the original transaction request
transactionDate
string
25 characters
Transaction date, in format YYYY-MM-DDTHH:mm:ss+07:00. Time must be in GMT+7 (Jakarta time)
amount
money
Amount. Contains two sub-fields:

1. Value: Transaction amount, including the cents
2. Currency: Currency code based on ISO

Show object details
merchantId
string
1 - 64 characters
Required
Merchant identifier that is unique per each merchant
subMerchantId
string
1 - 32 characters
Sub merchant identifier, known as externalDivisionId must be registered in the DANA system before use. To register a new externalDivisionId, use the Create Division API
externalStoreId
string
1 - 64 characters
Store identifier to indicate to which store this payment belongs to, known as externalShopId must be registered in the DANA system before use. To register a new externalShopId, use the Create Shop API
additionalInfo
json object
Additional information

Request Sample
JSON
POST .../rest/v1.1/debit/status HTTP/1.2
Content-type: application/json
X-TIMESTAMP: 2020-12-23T08:31:11+07:00
X-SIGNATURE: 85be817c55b2c135157c7e89f52499bf0c25ad6eeebe04a986e8c862561b19a5
ORIGIN: <www.hostname.com>
X-PARTNER-ID: 82150823919040624621823174737537
X-EXTERNAL-ID: 41807553358950093184162180797837
CHANNEL-ID: 95221
{
    "originalPartnerReferenceNo":"2020102900000000000001",
    "originalReferenceNo":"2020102977770000000009",
    "originalExternalId":"30443786930722726463280097920912",
    "serviceCode": "XX",
    "transactionDate":"2020-12-21T14:56:11+07:00",
    "amount":{
        "value":"12345678.00",
         "currency":"IDR"
},
    "merchantId": "23489182303312",
    "subMerchantId": "23489182303312",
    "externalStoreId":"183908924912387",
    "additionalInfo":{}
}

Response Headers
Content-Type
string
1 - 127 characters
Required
Content type, value always application/json
X-TIMESTAMP
string
25 characters
Required
Transaction date time, in format YYYY-MM-DDTHH:mm:ss+07:00. Time must be in GMT+7 (Jakarta time)

Response Body
responseCode
string
7 characters
Required
Refer to response code list
responseMessage
string
1 - 150 characters
Required
Refer to response code list
originalPartnerReferenceNo
string
1 - 64 characters
Conditional
Original transaction identifier on partner system
Conditional Info
Y:= Transaction found
originalReferenceNo
string
1 - 64 characters
Conditional
Original transaction identifier on DANA system
Conditional Info
Y:= Transaction found
originalExternalId
string
1 - 32 characters
Original external identifier on header message
serviceCode
string
2 characters
Required
Transaction type indicator is based on the service code of the original transaction request
latestTransactionStatus
string
2 characters
Required
Category code for the status of the transaction. The values include:
• 00 = Success, the order has been successfully in final state and paid
• 01 = Initiated, the order has been created, but has not been paid
• 02 = Paying, the order is in process, not in final state, payment is success
• 05 = Cancelled, the order has been closed
• 07 = Not found, the order is not found
transactionStatusDesc
string
1 - 50 characters
Description of transaction status
originalResponseCode
string
1 - 7 characters
Original response code, refer to response code list
originalResponseMessage
string
1 - 150 characters
Original response message, refer to response code list
sessionId
string
1 - 25 characters
Session identifier
requestId
string
1 - 25 characters
Transaction request identifier
transAmount
money
Conditional
Trans amount. Contains two sub-fields:

1. Value: Amount, including the cents
2. Currency: Currency code based on ISO
Conditional Info
Y:= Transaction found

Show object details
feeAmount
money
Fee amount. Contains two sub-fields:

1. Value: Amount, including the cents
2. Currency: Currency code based on ISO

Show object details
paidTime
string
25 characters
Conditional
Transaction paid time, in format YYYY-MM-DDTHH:mm:ss+07:00. Time must be in GMT+7 (Jakarta time)
Conditional Info
Y:= Transaction is paid
additionalInfo
json object
Additional information
additionalInfo.title
string
1 - 256 characters
Conditional
Brief description
Conditional Info
Y:= Transaction found
additionalInfo.buyer
json object
Additional information of buyer

Show object details
additionalInfo.seller
json object
Additional information of seller

Show object details
additionalInfo.amountDetail
json object
Conditional
Additional information of amount detail
Conditional Info
Y:= Transaction found

Show object details

additionalInfo.timeDetail
json object
Conditional
Additional information of time detail
Conditional Info
Y:= Transaction found

Show object details
additionalInfo.goods
array of json object
Additional information of goods

Show object details

additionalInfo.shippingInfo
array of json object
Additional information of shipping

Show object details

additionalInfo.orderMemo
string
1 - 64 characters
Additional information of memo
additionalInfo.paymentViews
array of json object
Conditional
Additional information of payment views
Conditional Info
Y:= Transaction found

Show object details

additionalInfo.extendInfo
string
1 - 4096 characters
Additional information of extend
additionalInfo.statusDetail
json object
Additional information of status detail

Show object details
additionalInfo.closeReason
string
1 - 128 characters
Additional information of close reason

Response Sample
JSON
Content-Type: application/json
X-TIMESTAMP: 2020-12-23T09:10:11+07:00
{
    "responseCode": "2005500",
    "responseMessage": "Successful",
    "originalPartnerReferenceNo": "2020102900000000000001",
    "originalReferenceNo": "2020102977770000000009",
    "originalExternalId": "30443786930722726463280097920912",
    "serviceCode": "XX",
    "latestTransactionStatus": "00",
    "transactionStatusDesc": "success",
    "originalResponseCode": "2005500",
    "originalResponseMessage": "Successful",
    "sessionId": "883737GHY8839",
    "requestId": "3763773",
    "transAmount": {
        "currency": "IDR",
        "value": "239.00"
    },
    "feeAmount": {
        "currency": "IDR",
        "value": "239.00"
    },
    "paidTime": "2020-12-21T14:56:11+07:00",
    "additionalInfo": {
        "title": "CITestGoods",
        "buyer": {
            "userId": "20160322334445555",
            "externalUserId": "",
            "externalUserType": "",
            "nickname": "mike"
        },
        "seller": {
            "userId": "20160322334445555",
            "externalUserId": "",
            "externalUserType": "",
            "nickname": "mike"
        },
        "amountDetail": {
            "orderAmount": {
                "currency": "IDR",
                "value": "239.00"
            },
            "payAmount": {
                "currency": "IDR",
                "value": "239.00"
            },
            "voidAmount": {
                "currency": "IDR",
                "value": "239.00"
            },
            "confirmAmount": {
                "currency": "IDR",
                "value": "239.00"
            },
            "refundAmount": {
                "currency": "IDR",
                "value": "239.00"
            },
            "chargebackAmount": {
                "currency": "IDR",
                "value": "239.00"
            },
            "chargeAmount": {
                "currency": "IDR",
                "value": "239.00"
            }
        },
        "timeDetail": {
            "createdTime": "2001-07-04T12:08:56+07:00",
            "expiryTime": "2001-07-04T12:08:56+07:00",
            "paidTimes": [
                "2001-07-04T12:08:56+07:00"
            ],
            "confirmedTimes": [
                "2001-07-04T12:08:56+07:00"
            ],
            "cancelledTime": "2001-07-04T12:08:56+07:00"
        },
        "goods": [
            {
                "merchantGoodsId": "24525635625623",
                "description": "Women Summer Dress New White Lace Sleeveless\nCute Casual Summer Dresses Vestidos roupas femininas WQW1045",
                "category": "travelling/subway",
                "price": {
                    "currency": "IDR",
                    "value": "239.00"
                },
                "unit": "Kg",
                "quantity": "3.2",
                "merchantShippingId": "564314314574327545",
                "snapshotUrl": "[http://snap.url.com]",
                "extendInfo": "{ \"objectId\": \"87884393857\",\"objectCode\": \"62\",\"objectOperator\": \"Telkomsel\"}"
            }
        ],
        "shippingInfo": [
            {
                "merchantShippingId": "564314314574327545",
                "trackingNo": "646431431322332133",
                "carrier": "Federal Express",
                "chargeAmount": {
                    "currency": "IDR",
                    "value": "239.00"
                },
                "countryName": "JP",
                "stateName": "GA",
                "cityName": "Atlanta",
                "areaName": "Rd",
                "address1": "137 W San Bernardino",
                "address2": "4114 Sepulveda",
                "firstName": "Jim",
                "lastName": "Li",
                "mobileNo": "13765443223",
                "phoneNo": "2423-2322342",
                "zipCode": "310001",
                "email": "abc@gmail.com",
                "faxNo": "2123-11113"
            }
        ],
        "orderMemo": "memo",
        "paymentViews": [
            {
                "cashierRequestId": "64c4fdc544a7edff9c1e51aebc80f2eb",
                "paidTime": "2022-01-04T19:13:54+07:00",
                "payOptionInfos": [
                    {
                        "payMethod": "BALANCE",
                        "payAmount": {
                            "value": "51312.00",
                            "currency": "IDR"
                        },
                        "transAmount": {
                            "value": "51312.00",
                            "currency": "IDR"
                        },
                        "chargeAmount": {
                            "value": "0.00",
                            "currency": "IDR"
                        },
                        "payOptionBillExtendInfo": "{\"key\":\"value\"}",
                        "extendInfo": "{\"key\":\"value\"}"
                    }
                ],
                "payRequestExtendInfo": "{\"key\":\"value\"}",
                "extendInfo": "{\"key\":\"value\"}"
            }
        ],
        "extendInfo": "{\"key\":\"value\"}",
        "statusDetail": {
            "acquirementStatus": "SUCCESS",
            "frozen": false,
            "cancelled": false
        },
        "closeReason": "reason"
    }
}

Response Codes List
Response Cause Solution
2005500
Successful
Success to be processed 
Mark Query Payment process as Success and check the latestTransactionStatus, with these conditions:
• 00 = Order has been successfully in final state and paid. Mark Payment as Success
• 01 = Waiting for payment. Mark Payment as Pending
• 02 = The order is in process, not in final state, payment is success. Mark Payment as Success
• 05 = Order has been cancelled. Mark Payment as Failed
• 07 = Order is not found. Mark Payment as Failed
4005500
Bad Request
General request failed error 
Mark Query Payment process as Failed and mark Payment as Pending. Retry request with proper parameter
4005501
Invalid Field Format
Invalid format for certain field 
Mark Query Payment process as Failed and mark Payment as Pending. Retry request with proper parameter
4005502
Invalid Mandatory Field
Missing or invalid format on mandatory field 
Mark Query Payment process as Failed and mark Payment as Pending. Retry request with proper parameter
4015500
Unauthorized. [reason]
General unauthorized error 
Mark Query Payment process as Failed and mark Payment as Pending. Retry request with proper parameter
4045501
Transaction Not Found
Transaction not found 
Mark Query Payment process as Failed and mark Payment as Failed. Try to create a new order
4295500
Too Many Requests
Maximum transaction limit exceeded 
Mark Query Payment process as Pending mark Payment as Pending. Retry request periodically
5005500
General Error
General error non retry-able 
Mark Query Payment process as Failed and mark Payment as Pending. Retry request periodically
5005501
Internal Server Error
Unknown internal server failure, please retry the process again 
Mark Query Payment process as Pending mark Payment as Pending. Retry request periodically
Total timeout
Total timeout, the client side does not get any responses from the server side (Can be due to network issue, server slowing down, and so on) 
Do a retry maximum 3 attempts, if still fails mark Query Payment process as Pending and mark Payment as Pending
Unexpected response (Empty field/field does not exist/undefined response code)
The server does not produce expected responses (Can be due to hardware failure, bugs, and so on) 
If the response code prefix are 202 and 5XX, mark Query Payment process as Pending and mark Payment as Pending.
If empty field/field does not exist, mark Query Payment process as Pending and mark Payment as Pending.
