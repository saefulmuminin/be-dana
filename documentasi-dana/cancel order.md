DANA Widget APICancel Order
Cancel Order
POST
/v1.0/debit/cancel.htm
This is the API used to cancel the order from merchant’s platform to DANA

API Type
SNAP API
Expected Timeout
8 second
SNAP Service Code
57

Show API Details
This API is used for the following solution:
DANA Widget Binding
Seamlessly integrate DANA payments into merchant's platform, allowing customers to link their DANA accounts for faster, smoother transactions across all merchant's services.
This API is used for the following solution:
DANA Widget Non Binding
Integrate DANA as a payment method in merchant's platform without account binding. Users simply select DANA, get redirected to the DANA App, and complete payments using their DANA account.

Request Headers
Content-Type
string
1 - 127 characters
Required
Content type, value always application/json
X-TIMESTAMP
string
25 characters
Required
Transaction date time, in format YYYY-MM-DDTHH:mm:ss+07:00. Time must be in GMT+7 (Jakarta time)
X-SIGNATURE
string
Required
Signature need to be generated with asymmetricSignature method
ORIGIN
string
Origin domain
X-PARTNER-ID
string
1 - 36 characters
Required
Unique identifier for partner was generated by DANA, or known as clientId
X-EXTERNAL-ID
string
1 - 36 characters
Required
Unique messaging reference identifier generated by merchant and should be unique within the same day
CHANNEL-ID
string
1 - 5 characters
Required
Device identification on which the API services is currently being accessed by the end user (customer)

Request Body
originalPartnerReferenceNo
string
1 - 64 characters
Required
Original transaction identifier on partner system
originalReferenceNo
string
1 - 64 characters
Original transaction identifier on DANA system
originalExternalId
string
1 - 36 characters
Original external identifier on header message
merchantId
string
1 - 64 characters
Required
Merchant identifier that is unique per each merchant
subMerchantId
string
1 - 32 characters
Sub merchant identifier, known as externalDivisionId must be registered in the DANA system before use. To register a new externalDivisionId, use the Create Division API
reason
string
1 - 256 characters
Cancellation reason
externalStoreId
string
1 - 64 characters
Store identifier to indicate to which store this payment belongs to, known as externalShopId must be registered in the DANA system before use. To register a new externalShopId, use the Create Shop API
amount
money
Amount. Contains two sub-fields:

1. Value: Transaction amount, including the cents
2. Currency: Currency code based on ISO

Show object details
additionalInfo
json object
Additional information

Request Sample
JSON
POST .../v1.0/debit/cancel.htm HTTP/1.2
Content-type: application/json
X-TIMESTAMP: 2020-12-23T07:44:11+07:00
X-SIGNATURE: 85be817c55b2c135157c7e89f52499bf0c25ad6eeebe04a986e8c862561b19a5
ORIGIN: <www.hostname.com>
X-PARTNER-ID: 82150823919040624621823174737537
X-EXTERNAL-ID: 41807553358950093184162180797837
CHANNEL-ID: 95221
{
    "originalPartnerReferenceNo": "2020102900000000000001",
    "originalReferenceNo": "2020102977770000000009",
    "originalExternalId": "30443786930722726463280097920912",
    "merchantId": "23489182303312",
    "subMerchantId": "23489182303312",
    "reason": "Network timeout",
    "externalStoreId": "124928924949487",
    "amount": {
        "value": "10000.00",
        "currency": "IDR"
    },
    "additionalInfo": {}
}

Response Headers
Content-Type
string
1 - 127 characters
Required
Content type, value always `application/json`
X-TIMESTAMP
string
25 characters
Required
Transaction date time, in format YYYY-MM-DDTHH:mm:ss+07:00. Time must be in GMT+7 (Jakarta time)

Response Body
responseCode
string
7 characters
Required
Refer to response code list
responseMessage
string
1 - 150 characters
Required
Refer to response code list
originalReferenceNo
string
1 - 64 characters
Conditional
Original transaction identifier on DANA system
Conditional Info
Y:= Successfully processed
originalPartnerReferenceNo
string
1 - 64 characters
Required
Original transaction identifier on partner system
originalExternalId
string
1 - 36 characters
Original external identifier on header message
cancelTime
string
25 characters
Conditional
Cancellation date time, in format YYYY-MM-DDTHH:mm:ss+07:00. Time must be in GMT+7 (Jakarta time)
Conditional Info
Y:= Successfully processed
transactionDate
string
25 characters
Transaction date, in format YYYY-MM-DDTHH:mm:ss+07:00. Time must be in GMT+7 (Jakarta time)
additionalInfo
json object
Additional information

Response Sample
JSON
Content-type: application/json
X-TIMESTAMP: 2020-12-23T07:44:16+07:00
{
    "responseCode": "2005700",
    "responseMessage": "Successful",
    "originalPartnerReferenceNo": "2020102900000000000001",
    "originalReferenceNo": "2020102977770000000009",
    "originalExternalId": "30443786930722726463280097920912",
    "cancelTime": "2020-12-21T17:07:25+07:00",
    "transactionDate": "2020-12-21T17:55:11+07:00",
    "additionalInfo": {}
}

Response Codes List
Response Cause Solution
2005700
Successful
Success to be processed 
Mark Cancel Order process as Success
2025700
Request In Progress
Cancel is on process 
Mark Cancel Order process as Pending. Retry request periodically by sending same request payload
4005700
Bad Request
General request failed error 
Mark Cancel Order process as Failed. Retry request with proper parameter
4005701
Invalid Field Format
Invalid format for certain field 
Mark Cancel Order process as Failed. Retry request with proper parameter
4005702
Invalid Mandatory Field
Missing or invalid format on mandatory field 
Mark Cancel Order process as Failed. Retry request with proper parameter
4015700
Unauthorized. [reason]
General unauthorized error 
Mark Cancel Order process as Failed. Retry request with proper parameter
4035700
Transaction Expired
Transaction cannot be cancelled because cancel time is already expired 
Mark Cancel Order process as Failed. Inform to user that order cancel cannot be processed
4035705
Do Not Honor
Account or user status is abnormal 
Mark Cancel Order process as Failed. Retry request with proper parameter or can contact to DANA check the user/account status
4035714
Insufficient Funds
Insufficient funds of merchant’s account to cancel the order 
Mark Cancel Order process as Failed. Retry request periodically
4035715
Transaction Not Permitted.[reason]
Transaction not permitted 
Mark Cancel Order process as Failed. Retry request periodically or contact DANA to consult
4045700
Invalid Transaction Status
Invalid transaction status 
Mark Cancel Order process as Failed. Retry request periodically or contact DANA to consult
4045701
Transaction Not Found
Transaction not found 
Mark Cancel Order process as Failed. Retry request with proper parameter
4045708
Invalid Merchant
Merchant does not exist or status abnormal 
Mark Cancel Order process as Failed. Retry request with proper parameter
4295700
Too Many Requests
Maximum transaction limit exceeded 
Mark Cancel Order process as Pending. Retry request periodically by sending same request payload
5005700
General Error
General error non retry-able 
Mark Cancel Order process as Failed. Retry request periodically
5005701
Internal Server Error
Unknown internal server failure, please retry the process again 
Mark Cancel Order process as Pending. Retry request periodically by sending same request payload
Total Timeout
Total timeout, the client side does not get any responses from the server side (can be due to network issue, server slowing down, and so on) 
Do a retry maximum 3 attempts, if the result is still the same then action is aborted. Show appropriate error message to users
Unexpected response (Empty field/field does not exist/undefined response code)
The server does not produce expected responses (can be due to hardware failure, bugs, and so on) 
If the response code prefix are 202 and 5XX, mark Cancel Order process as Pending.
If empty field/field does not exist, mark Cancel Order process as Pending.
