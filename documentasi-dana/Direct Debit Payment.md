Direct Debit Payment
POST
/rest/redirection/v1.0/debit/payment-host-to-host
This API is used to initiate payment from merchant's platform to DANA

API Type
SNAP API
Expected Timeout
8 second
SNAP Service Code
54

Show API Details
This API is used for the following solution:
DANA Widget Binding
Seamlessly integrate DANA payments into merchant's platform, allowing customers to link their DANA accounts for faster, smoother transactions across all merchant's services.
This API is used for the following solution:
DANA Widget Non Binding
Integrate DANA as a payment method in merchant's platform without account binding. Users simply select DANA, get redirected to the DANA App, and complete payments using their DANA account.
Idempotent Key & Usage Rules
If there is no OTT, meaning when accessing the checkout URL user has to do login otherwise user can directly go to the cashier page.
Idempotent is controlled by Idempotent Key(merchantId+partnerReferenceNo)
If Idempotent Key has been created and the key information is consistent, then Response code 2005400 (success) will be returned.
If Idempotent Key has been created but the key information isn't consistent, then Response code 4045418 (inconsistent request) will be returned.

Request Headers
Content-Type
string
1 - 127 characters
Required
Content type, value always application/json
X-TIMESTAMP
string
25 characters
Required
Transaction date time, in format YYYY-MM-DDTHH:mm:ss+07:00. Time must be in GMT+7 (Jakarta time)
X-SIGNATURE
string
Required
Signature need to be generated with asymmetricSignature method
ORIGIN
string
Origin domain
X-PARTNER-ID
string
1 - 36 characters
Required
Unique identifier for partner was generated by DANA, or known as clientId
X-EXTERNAL-ID
string
1 - 36 characters
Required
Unique messaging reference identifier generated by merchant and should be unique within the same day
CHANNEL-ID
string
1 - 5 characters
Required
Device identification on which the API services is currently being accessed by the end user (customer)

Request Body
partnerReferenceNo
string
1 - 64 characters
Required
Unique transaction identifier in partner system for each transaction.
Note: When retrying after a timeout or unexpected response, use the same partnerReferenceNo as in the original request
merchantId
string
1 - 64 characters
Required
Merchant identifier that is unique per each merchant
subMerchantId
string
1 - 32 characters
Sub merchant identifier, known as externalDivisionId must be registered in the DANA system before use. To register a new externalDivisionId, use the Create Division API
amount
money
Required
Amount. Contains two sub-fields:

1. Value: Transaction amount, including the cents
2. Currency: Currency code based on ISO

Show object details
urlParams
array of json object
Notify URL that merchant must send the payment notification to

Show object details

externalStoreId
string
1 - 64 characters
Store identifier to indicate to which store this payment belongs to, known as externalShopId must be registered in the DANA system before use. To register a new externalShopId, use the Create Shop API
validUpTo
string
25 characters
The time when the payment will be automatically expired, in format YYYY-MM-DDTHH:mm:ss+07:00.
Time must be in GMT+7 (Jakarta time)
pointOfInitiation
string
1 - 20 characters
Used for getting more info regarding source of request of the user
disabledPayMethods
string
1 - 64 characters
Payment method(s) that cannot be used for this
payOptionDetails
array of json object
Payment option that will be used for this payment

Show object details

additionalInfo
json object
Additional information
additionalInfo.supportDeepLinkCheckoutUrl
string
1 - 64 characters
Additional information of deeplink checkout URL. For Mini Program, DANA will treat as false
additionalInfo.phoneNumber
string
1 - 64 characters
Additional information of user's phone number
additionalInfo.publicUserId
string
1 - 64 characters
Additional information of public user's identifier
additionalInfo.productCode
string
1 - 32 characters
Required
Additional information of product code
additionalInfo.order.buyer
json object
Additional information of buyer

Show object details
additionalInfo.order.seller
json object
Additional information of seller

Show object details
additionalInfo.order.orderTitle
string
1 - 64 characters
Required
Additional information of order title
additionalInfo.order.merchantTransType
string
1 - 64 characters
Additional information of merchant transaction type
additionalInfo.order.orderMemo
string
1 - 64 characters
Additional information of order memo
additionalInfo.order.createdTime
string
25 characters
Additional information of created time, in format YYYY-MM-DDTHH:mm:ss+07:00.
Time must be in GMT+7 (Jakarta time)
additionalInfo.order.goods
array of json object
Additional information of goods

Show object details

additionalInfo.order.shippingInfo
array of json object
Additional information of shipping

Show object details

additionalInfo.order.extendInfo
string
1 - 4096 characters
Additional information of extend
additionalInfo.mcc
string
1 - 64 characters
Required
Additional information of merchant category code. This parameter is used to identify the type of business in which a merchant is engaged. Refer to Details of Merchant Category Code
additionalInfo.envInfo
json object
Required
Additional information of environment

Show object details
additionalInfo.extendInfo
string
1 - 4096 characters
Additional information of extend

Request Sample
JSON
POST .../rest/redirection/v1.0/debit/payment-host-to-host HTTP/1.2
Content-type: application/json
X-TIMESTAMP: 2020-12-23T08:31:11+07:00
X-SIGNATURE: 85be817c55b2c135157c7e89f52499bf0c25ad6eeebe04a986e8c862561b19a5
ORIGIN: <www.hostname.com>
X-PARTNER-ID: 82150823919040624621823174737537
X-EXTERNAL-ID: 41807553358950093184162180797837
CHANNEL-ID: 95221
{
    "partnerReferenceNo": "2020102900000000000001",
    "merchantId": "23489182303312",
    "subMerchantId": "310928924949487",
    "amount": {
            "value": "12345678.00",
            "currency": "IDR"
    },
    "urlParams": [{
        "url": "https://test.bi.go.id/v1/test",
        "type": "PAY_RETURN",
        "isDeeplink": "Y"
    }],
    "externalStoreId": "239840198240795109",
    "validUpTo": "2020-12-23T07:44:11+07:00",
    "pointOfInitiation": "Mobile App",
    "disabledPayMethods": "CREDIT_CARD",
    "payOptionDetails": [{
        "payMethod": "CREDIT_CARD",
        "payOption": "CREDIT_CARD_VISA",
        "transAmount": {
            "value": "12345678.00",
            "currency": "IDR"
        },
        "feeAmount": {
            "value": "12345678.00",
            "currency": "IDR"
        },
        "cardToken": "d89ca90ua90sd80as9809",
        "merchantToken": "a90ua90sd80d89cas9809",
        "additionalInfo": {
            "topupAndPay": "true",
            "payerAccountNo": "20050000000001503276",
            "saveCardAfterPay": "true",
            "channelInfo": "{\"key\" : \"value\" }",
            "issuingCountry": "IN",
            "assetType": "true",
            "extendInfo": "{ \"key\" : \"value\" }"
        }
    }],
    "additionalInfo": {
        "supportDeepLinkCheckoutUrl": true,
        "phoneNumber": "",
        "publicUserId": "",
        "productCode": "51051000100000000001",
        "order": {
            "buyer": {
                "externalUserType": "",
                "nickname": "",
                "externalUserId": "",
                "userId": ""
            },
            "seller": {
                "externalUserType": "",
                "nickname": "mike",
                "externalUserId": "",
                "userId": "216610000000010034501"
            },
            "orderTitle": "Women Summer Dress New White Lace  Sleeveless Cute Casual Summer Dresses  Vestidos roupas femininas WQW1045",
            "merchantTransType": "type",
            "orderMemo": "Memo",
            "createdTime": "2020-12-23T08:31:11+07:00",
            "goods": [{
                "unit": "Kg",
                "category": "travelling/subway",
                "price": {
                    "value": "10.00",
                    "currency": "IDR"
                },
                "merchantShippingId": "564314314574327545",
                "merchantGoodsId": "24525635625623",
                "description": "Women Summer Dress New White Lace Sleeveless Cute Casual Summer Dresses Vestidos roupas femininas WQW1045",
                "snapshotUrl": "[http://snap.url.com]",
                "quantity": "",
                "extendInfo": ""
            }],
            "shippingInfo": [{
                "chargeAmount": {
                    "value": "20.00",
                    "currency": "IDR"
                },
                "lastName": "Li",
                "trackingNo": "646431431322332133",
                "countryName": "JP",
                "merchantShippingId": "564314314574327545",
                "cityName": "Atlanta",
                "address1": "137 W San Bernardino",
                "address2": "4114 Sepulveda",
                "phoneNo": "2423-2322342",
                "areaName": "Rd",
                "email": "abc@gmail.com",
                "zipCode": "310001",
                "stateName": "GA",
                "faxNo": "2123-11113",
                "carrier": "Federal Express",
                "firstName": "Jim",
                "mobileNo": "13765443223"
            }],
            "extendInfo": ""
        },
        "mcc": "5732",
        "envInfo": {
            "sessionId": "8EU6mLl5mUpUBgyRFT4v7DjfQ3fcauthcenter",
            "tokenId": "a8d359d6-ca3d-4048-9295-bbea5f6715a6",
            "websiteLanguage": "en_US",
            "clientIp": "10.15.8.189",
            "osType": "Windows.PC",
            "appVersion": "1.0",
            "sdkVersion": "1.0",
            "sourcePlatform": "IPG",
            "orderOsType": "IOS",
            "merchantAppVersion": "1.0",
            "terminalType": "SYSTEM",
            "orderTerminalType": "WEB",
            "extendInfo": "{\"deviceId\":\"CV19A56370e8a00d54293aab8001e4794\"}"
            },
        "extendInfo": ""
    }
}

Response Headers
Content-Type
string
1 - 127 characters
Required
Content type, value always application/json
X-TIMESTAMP
string
25 characters
Required
Transaction date time, in format YYYY-MM-DDTHH:mm:ss+07:00. Time must be in GMT+7 (Jakarta time)

Response Body
responseCode
string
7 characters
Required
Refer to response code list
responseMessage
string
1 - 150 characters
Required
Refer to response code list
referenceNo
string
1 - 64 characters
Conditional
Transaction identifier on DANA system
Conditional Info
Y:= Successfully processed
partnerReferenceNo
string
1 - 64 characters
Required
Unique transaction identifier in partner system for each transaction.
Note: When retrying after a timeout or unexpected response, use the same partnerReferenceNo as in the original request
webRedirectUrl
string
1 - 2048 characters
Conditional
DANA checkout URL
Conditional Info
Y:= Successfully processed
additionalInfo
json object
Additional information

Response Sample
JSON
Content-Type: application/json
X-TIMESTAMP: 2020-12-23T08:31:11+07:00
{
    "responseCode": "2005400",
    "responseMessage": "Successful",
    "referenceNo": "2020102977770000000009",
    "partnerReferenceNo": "2020102900000000000001",
    "webRedirectUrl": "<https://pjsp.com/universal?bizNo=REF993883&>...",
    "additionalInfo":{}
}

Response Codes List
Response Cause Solution
2005400
Successful
Success to be processed 
Mark Direct Debit Payment process as Success
4005400
Bad Request
General request failed error 
Mark Direct Debit Payment process as Failed. Retry request with proper parameter
4005401
Invalid Field Format
Invalid format for certain field 
Mark Direct Debit Payment process as Failed. Retry request with proper parameter
4005402
Invalid Mandatory Field
Missing or invalid format on mandatory field 
Mark Direct Debit Payment process as Failed. Retry request with proper parameter
4015400
Unauthorized. [reason]
General unauthorized error 
Mark Direct Debit Payment process as Failed. Retry request with proper parameter
4035402
Exceeds Transaction Amount Limit
Exceeds transaction amount limit 
Mark Direct Debit Payment process as Failed. Try to adjust the order amount
4035405
Do Not Honor
Account or user status is abnormal 
Mark Direct Debit Payment process as Failed. Retry request with proper parameter or can contact DANA to check the user/account status
4035415
Transaction Not Permitted.[reason]
Transaction not permitted 
Mark Direct Debit Payment process as Failed. Retry request periodically or consult to DANA
4045408
Invalid Merchant
Merchant does not exist or status abnormal 
Mark Direct Debit Payment process as Failed. Retry request with proper parameter
4045418
Inconsistent Request
Inconsistent request parameter found for the same partner reference number/transaction identifier 
Mark Direct Debit Payment process as Failed. Retry with proper parameter
4295400
Too Many Requests
Maximum transaction limit exceeded 
Mark Direct Debit Payment process as Pending. Retry request periodically by sending same request payload
5005400
General Error
General error non retry-able 
Mark Direct Debit Payment process as Failed. Retry request periodically
5005401
Internal Server Error
Unknown internal server failure, please retry the process again 
Mark Direct Debit Payment process as Pending. Retry request periodically by sending same request payload
Total timeout
Total timeout, the client side does not get any responses from the server side (Can be due to network issue, server slowing down, and so on) 
Do a retry maximum 3 attempts by sending same request payload, if still fails mark Direct Debit Payment process as Pending
Unexpected response (Empty field/field does not exist/undefined response code)
The server does not produce expected responses (Can be due to hardware failure, bugs, and so on) 
• If the response code prefix are 202 and 5XX, mark Direct Debit Payment process as Pending
• If empty field/field does not exist, mark Direct Debit Payment process as Pending
